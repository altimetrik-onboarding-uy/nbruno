<aura:component controller="WorkItemKanbanController">
    <aura:attribute name="workItem" type="Work_Item__c" default="{'Title__c':'Work Item Title','Status__c':'New','Difficulty__c':'8', 'RecordType':'0126g000000m6yVAAQ', 'RecordType.Name':'Fix'}"/>
    <aura:attribute name="isOverdue" type="Boolean" default="true"/>
    <aura:attribute name="helpText" type="String" default="Help text."/>
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:handler event="force:showToast" action="{!c.refreshView}"/>
    
    <article class="slds-card">
        <div class="slds-card__header slds-grid card draggable" draggable="true" ondragstart="{!c.onDragStart}">
            <header class="slds-media slds-media_center slds-has-flexi-truncate slds-border_bottom">
                <div class="slds-media__figure">
                    <span>
                        <h2 class="slds-card__header-title">
                            <lightning:helptext content="{!v.helpText}"/>
                            <aura:if isTrue="{!v.workItem.RecordType.Name == 'Fix'}">
                                <lightning:icon iconName="custom:custom19" size="large" class="slds-m-right_medium" alternativeText="Fix"/>
                            </aura:if>
                            <aura:if isTrue="{!v.workItem.RecordType.Name == 'Idea'}">
                                <lightning:icon iconName="custom:custom55" size="large" class="slds-m-right_medium" alternativeText="Idea"/>
                            </aura:if>
                            <aura:if isTrue="{!v.workItem.RecordType.Name == 'Action'}">
                                <lightning:icon iconName="custom:custom83" size="large" class="slds-m-right_medium" alternativeText="Idea"/>
                            </aura:if>
                            <a onclick="{!c.editRecord}">{!v.workItem.Title__c}</a>
                        </h2>
                    </span>
                </div>
            </header>
        </div>
        
        <div class="slds-card__body slds-card__body_inner">
            <lightning:layoutItem>
                <div class="slds-text-heading_small slds-p-right_x-large" align="right">{!'Difficulty: '+v.workItem.Difficulty__c}</div>
            </lightning:layoutItem>
        </div>
        <footer class="slds-card__footer">
            <lightning:layoutItem>
                <aura:if isTrue="{!not(v.isOverdue)}">   
                    <div class="slds-text-color_success">
                        Item is not overdue 
                        <lightning:icon iconName="action:approval" size="small"/>
                    </div>    
                </aura:if> 
                <aura:if isTrue="{!v.isOverdue}">  
                    <div class="slds-text-color_error">
                        This item is overdue 
                        <lightning:icon iconName="action:close" size="small"/>
                    </div>    
                </aura:if>  
            </lightning:layoutItem>
        </footer>
    </article>
</aura:component>